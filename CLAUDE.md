# Letter Box 项目章程

## 项目概述

**Letter Box** 是一个温馨的个人项目，用于存储和女友的书信往来，记录珍贵的幸福时刻。

### 核心目标
- 提供优雅、便捷的阅读体验
- 打造美丽、温馨的用户界面
- 安全可靠地存储珍贵回忆

## 技术栈

- **前端框架**: React 18+ with Next.js (App Router)
- **渲染模式**: React Server Components (RSC)
- **数据库**: MySQL
- **样式方案**: Tailwind CSS
- **语言**: TypeScript

## 开发规范与约束

### 1. 代码质量

#### TypeScript 使用规范
- **严格类型检查**: 所有代码必须启用 TypeScript 严格模式
- **避免 any**: 禁止使用 `any` 类型，必要时使用 `unknown` 或明确的类型
- **类型优先**: 优先定义清晰的类型接口，确保类型安全

#### 代码风格
- 遵循项目的 ESLint 配置
- 使用函数式组件和 React Hooks
- 组件命名采用 PascalCase
- 文件命名采用 kebab-case
- 保持代码简洁，单一职责原则

### 2. React Server Components (RSC) 最佳实践

- **默认使用 Server Components**: 除非需要客户端交互，否则默认使用服务端组件
- **'use client' 指令**: 仅在需要的组件顶部添加，最小化客户端 bundle
- **数据获取**: 优先在 Server Components 中直接查询数据库
- **避免过度客户端化**: 不需要状态和交互的组件应保持为服务端组件

### 3. 数据库设计原则

#### 表设计规范
- 使用有意义的表名和字段名（中英文均可，但保持一致性）
- 所有表必须包含：
  - `id`: 主键 (BIGINT AUTO_INCREMENT)
  - `created_at`: 创建时间 (TIMESTAMP DEFAULT CURRENT_TIMESTAMP)
  - `updated_at`: 更新时间 (TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
- 合理设置索引以优化查询性能
- 使用适当的数据类型，节省存储空间

#### 数据安全
- 敏感信息加密存储
- 实施数据备份策略
- 防止 SQL 注入，使用参数化查询

### 4. UI/UX 设计原则

#### 界面美学
- **温馨色调**: 使用柔和、温暖的配色方案
- **优雅排版**: 注重文字可读性，适当的行高和字间距
- **响应式设计**: 确保在各种设备上都有良好体验
- **动画过渡**: 使用细腻的过渡动画提升体验

#### 阅读体验优先
- **清晰的层次结构**: 信息组织清晰，易于浏览
- **舒适的阅读区域**: 合理的内容宽度和边距
- **深色模式支持**: 提供护眼的夜间阅读模式
- **加载优化**: 快速加载，减少等待时间

### 5. 功能开发规范

#### 开发流程
1. **需求确认**: 明确功能需求和用户体验目标
2. **数据库设计**: 设计或调整相关数据表结构
3. **API 设计**: 定义清晰的数据接口
4. **组件开发**: 遵循 RSC 最佳实践开发组件
5. **测试验证**: 确保功能正常且体验良好

### 6. 性能优化

- **图片优化**: 使用 Next.js Image 组件，自动优化图片
- **代码分割**: 合理使用动态导入减小初始 bundle
- **缓存策略**: 利用 Next.js 缓存机制提升性能
- **数据库查询优化**: 避免 N+1 查询，使用合适的索引

### 7. 安全与隐私

- **访问控制**: 实施身份验证，确保私密性
- **HTTPS**: 生产环境必须使用 HTTPS
- **输入验证**: 严格验证用户输入
- **XSS 防护**: 正确处理用户生成的内容

### 8. 项目结构

```
letter-box/
├── app/                    # Next.js App Router
│   ├── (routes)/          # 路由页面
│   ├── api/               # API 路由
│   └── components/        # 页面级组件
├── components/            # 可复用组件
│   ├── ui/               # UI 基础组件
│   └── features/         # 功能组件
├── lib/                   # 工具库
│   ├── db/               # 数据库相关
│   ├── utils/            # 工具函数
│   └── types/            # TypeScript 类型定义
├── public/               # 静态资源
└── styles/               # 全局样式
```

## 开发原则

1. **用户体验至上**: 每个功能都要考虑是否提升了阅读和使用体验
2. **保持简洁**: 避免过度设计，专注核心功能
3. **注重细节**: 小的交互细节决定整体体验
4. **性能优先**: 确保快速响应和流畅体验
5. **安全第一**: 保护珍贵的回忆数据

## AI 助手开发指南

当 Claude 或其他 AI 助手协助开发时，应遵循：

1. **必须先阅读本章程**: 在执行任何任务前，理解项目约束
2. **遵循技术栈**: 严格使用指定的技术栈和最佳实践
3. **保持代码质量**: 输出高质量、类型安全的代码
4. **注重体验**: 每次修改都要考虑用户体验影响
5. **安全意识**: 特别注意数据安全和隐私保护
6. **解释决策**: 重要的技术选择应说明理由
7. **避免过度设计**: 设计必须遵循“高内聚，低耦合”的原则，只针对需求本身来设计，禁止过度向前考虑。

---

**最后更新**: 2025-12-29
**维护者**: 崔昌赫
